{"version":3,"sources":["lib/fieldParsers.js","lib/Parser.js","lib/icsExporter.js","App.js","serviceWorker.js","index.js"],"names":["MonthNameDE","MonthNameDEDef","join","TimeDef","testDate","RegExp","DayDef","testTime","testTimeRange","testNotes","testLocation","testUrl","parseIfIsDate","ifElse","compose","test","prop","item","txt","parsed","exec","month","year","parseInt","forEach","def","index","replace","type","date","from","day","parseDate","body","parseIfIsTime","hour","minute","parseTime","parseIfIsTimeRange","to","parseTimeRange","parseIfIsNotes","notes","parseIfIsLocation","location","parseIfIsUrl","url","parseTitle","title","typeUndefCb","entry","cb","equals","Parser","this","events","defaults","parsedEntry","line","out","mergeDeepLeft","prefix","pick","push","parseLine","curry","s","a","t","i","e","length","c","charAt","splitter","map","trim","splitByComma","addType","value","data","parseDateTime","find","propEq","str","content","fm","err","console","log","attributes","filter","x","isEmpty","split","now","moment","icsExporter","properties","Property","name","uuid","v1","toDate","parameters","TZID","diff","add","VALUE","Component","icsEvent","components","toString","demoFrontmatter","demoContent","App","useState","setContent","useFrontmatter","setUseFrontmatter","frontmatter","setFrontmatter","parser","parse","className","onClick","preventDefault","ics","blob","Blob","saveAs","checked","onChange","target","event","role","aria-label","JSON","stringify","Boolean","window","hostname","match","ReactDOM","render","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"4YAOMA,EAAc,CAClB,eACA,uBACA,8BACA,cACA,QACA,aACA,aACA,eACA,yBACA,gBACA,iBACA,kBAGIC,EAAiBD,EAAYE,KAAK,KAQlCC,EAAU,8CAKVC,EAAWC,OAAO,KAXRC,uDADC,oCAA6BL,EAAiB,KACjB,mCAWN,IAAK,KACvCM,EAAWF,OAAO,IAAMF,EAAU,IAAK,KACvCK,EAAgBH,OAAO,IAAMF,EAJrB,6BAIuCA,EAAU,IAAK,KAG9DM,EAAY,oDACZC,EAAe,iDAEfC,EAAU,kBAsFHC,EAAgBC,YAC3BC,YACEC,YAAKX,GACLY,YAAK,UAEP,SAAAC,GAAI,OAzFY,SAAAC,GAChB,IAAIC,EAASf,EAASgB,KAAKF,GAEvBG,EAAQF,EAAO,GACfG,EAAOC,SAASJ,EAAO,IAY3B,OATIG,EAAO,OACTA,GAAc,KAIhBtB,EAAYwB,SAAQ,SAACC,EAAKC,GACxBL,EAAQA,EAAMM,QAAQtB,OAAOoB,EAAK,KAAMC,EAAQ,MAG3C,CACLE,KAAM,OACNC,KAAM,CACJC,KAAM,CACJC,IAAKZ,EAAO,GACZE,MAAOA,EACPC,KAAMA,KAmEJU,CAAUf,EAAKgB,SACvB,SAAAhB,GAAI,OAAIA,KAGGiB,EAAgBrB,YAC3BC,YACEC,YAAKR,GACLS,YAAK,UAEP,SAAAC,GAAI,OA5CY,SAAAC,GAChB,IAAIC,EAASZ,EAASa,KAAKF,GAC3B,MAAO,CACLU,KAAM,OACNC,KAAM,CACJC,KAAM,CACJK,KAAMhB,EAAO,GACbiB,OAAQjB,EAAO,MAqCbkB,CAAUpB,EAAKgB,SACvB,SAAAhB,GAAI,OAAIA,KAGGqB,EAAqBzB,YAChCC,YACEC,YAAKP,GACLQ,YAAK,UAEP,SAAAC,GAAI,OAxCiB,SAAAC,GACrB,IAAIC,EAASX,EAAcY,KAAKF,GAChC,MAAO,CACLU,KAAM,OACNC,KAAM,CACJC,KAAM,CACJK,KAAMhB,EAAO,GACbiB,OAAQjB,EAAO,IAEjBoB,GAAI,CACFJ,KAAMhB,EAAO,GACbiB,OAAQjB,EAAO,MA6BbqB,CAAevB,EAAKgB,SAC5B,SAAAhB,GAAI,OAAIA,KAGGwB,EAAiB5B,YAC5BC,YACEC,YAAKN,GACLO,YAAK,UAEP,SAAAC,GAAI,OAxFaC,EAwFED,EAAKgB,KAtFjB,CACLL,KAAM,QACNc,MAHWjC,EAAUW,KAAKF,GAGZ,IAJC,IAAAA,KAyFjB,SAAAD,GAAI,OAAIA,KAGG0B,EAAoB9B,YAC/BC,YACEC,YAAKL,GACLM,YAAK,UAEP,SAAAC,GAAI,OAxFgBC,EAwFED,EAAKgB,KAtFpB,CACLL,KAAM,WACNgB,SAHWlC,EAAaU,KAAKF,GAGZ,IAJC,IAAAA,KAyFpB,SAAAD,GAAI,OAAIA,KAGG4B,EAAehC,YAC1BC,YACEC,YAAKJ,GACLK,YAAK,UAEP,SAAAC,GAAI,OAzFWC,EAyFED,EAAKgB,KAvFf,CACLL,KAAM,MACNkB,IAHWnC,EAAQS,KAAKF,GAGZ,IAJC,IAAAA,KA0Ff,SAAAD,GAAI,OAAIA,KAGG8B,EAAa,SAAA9B,GAAI,MAAK,CACjCW,KAAM,QACNoB,MAAO,CAAEf,KAAMhB,EAAKgB,MACpBA,KAAMhB,EAAKgB,OC9JPgB,EAAc,SAACC,EAAOC,GAAR,OAClBtC,YACEC,YACEsC,YAAO,WACPpC,YAAK,UAEP,SAAAC,GAAI,OAAIkC,EAAGlC,MACX,SAAAA,GAAI,OAAIA,IANVJ,CAOEqC,IA4JWG,E,WAzJb,aAAe,oBACbC,KAAKC,OAAS,G,kDAGVL,EAAOM,GACX,IAAIC,EAAcH,KAAKI,KAAKR,GACxBS,EAAMC,YAAcH,EAAaD,GAyBrC,OAvBAG,EAAI9B,KAAKU,GAAKqB,YAAcD,EAAI9B,KAAKU,GAAIoB,EAAI9B,KAAKC,MAE9C6B,EAAIX,MAAMa,QAAUF,EAAIX,MAAMf,OAChC0B,EAAIX,MAAQ,CAACW,EAAIX,MAAMa,OAAQF,EAAIX,MAAMf,MAAM/B,KAC7CyD,EAAIX,MAAM9C,MAAQ,aAIlByD,EAAIX,MAAMa,SAAWF,EAAIX,MAAMf,OACjC0B,EAAIX,MAAQW,EAAIX,MAAMa,QAGnBF,EAAIX,MAAMa,SAAWF,EAAIX,MAAMf,MAA2B,KAAnB0B,EAAIX,MAAMf,OACpD0B,EAAIX,MAAQW,EAAIX,MAAMf,MAGpBwB,EAAYf,OAASc,EAASd,QAChCiB,EAAIjB,MAAQc,EAASd,MAAQ,KAAOe,EAAYf,OAGlDiB,EAAMG,YAAK,CAAC,OAAQ,QAAS,QAAS,WAAY,OAAQH,GAE1DL,KAAKC,OAAOQ,KAAKJ,GACVA,I,2BAGJD,GACH,IAAIC,EAAMD,EAGV,OADAC,EAAML,KAAKU,UAAUL,K,oCAIT1C,GAEZ,OAAOH,YACLmD,YAAMhB,EAAYrC,IAClBqD,YAAMhB,EAAYf,IAClB+B,YAAMhB,EAAYX,IAClB2B,YAAMhB,EAAYR,IAClBwB,YAAMhB,EAAYJ,IAClBoB,YAAMhB,EAAYN,IAClBsB,YAAMhB,EAAYF,IAPbjC,CAQLG,K,mCAISiD,GAGX,IAFA,IAESC,EAAI,GAAIC,EAAI,GAAIC,EAAI,EAAGC,EAAIJ,EAAEK,OAAQF,EAAIC,EAAGD,GAAK,EAAG,CAC3D,IAAIG,EAAIN,EAAEO,OAAOJ,GAHT,OAIJG,EACFJ,GAAKF,EAAEO,SAASJ,GAJV,MAKGG,EACTJ,GAAKI,GAELL,EAAEJ,KAAKK,GACPA,EAAI,IAIR,OADAD,EAAEJ,KAAKK,GACAD,I,gCAGCT,GAGR,IAAMgB,EAAW5D,YACf6D,YAAIC,KACJtB,KAAKuB,cAIDC,EAAUH,aAAI,SAAAI,GAAK,MAAK,CAAEnD,KAAM,UAAWK,KAAM8C,MAGnDC,EAAOlE,YACTgE,EACAJ,EAFS5D,CAGT4C,GAKEC,EAFJqB,EAAOL,YAAIrB,KAAK2B,cAAeD,GAc/B,OAVArB,EAAMC,YACJsB,YAAKC,YAAO,OAAQ,QAApBD,CAA6BF,IAAS,GACtCE,YAAKC,YAAO,OAAQ,QAApBD,CAA6BF,IAAS,IAGxCrB,EAAMC,YAAcD,EAAKuB,YAAKC,YAAO,OAAQ,SAApBD,CAA8BF,IAAS,IAChErB,EAAMC,YAAcD,EAAKuB,YAAKC,YAAO,OAAQ,YAApBD,CAAiCF,IAAS,IACnErB,EAAMC,YAAcD,EAAKuB,YAAKC,YAAO,OAAQ,OAApBD,CAA4BF,IAAS,IAC9DrB,EAAMC,YAAcD,EAAKuB,YAAKC,YAAO,OAAQ,SAApBD,CAA8BF,IAAS,M,4BAK5DI,GAAM,IAAD,OAELC,EAAU,CAAEpD,KAAMmD,GAEtB,GAAIE,IAAGvE,KAAKqE,GACV,IAEEC,EAAUC,IAAGF,GACb,MAAOG,GAEPF,EAAQpD,KAAOoD,EAAQpD,KAAKN,QAAQ,qBAAsB,IAC1D6D,QAAQC,IAAI,8BAIhB,IAOIjC,EAAWI,YAAcyB,EAAQK,WAP1B,CACT7D,KAAM,WACNmB,MAAO,QACPF,IAAK,GACLJ,MAAO,KAKLc,EAAS3B,OACX2B,EAAS3B,KAAOyB,KAAK2B,cAAc,CACjCrD,KAAM,UACNK,KAAMuB,EAAS3B,OACdA,MAGL,IAAM6C,EAAW5D,YACf6E,aAAO,SAAAC,GAAC,OAAKC,YAAQD,MACrBjB,YAAIC,KACJkB,YAAM,aAORnB,aAJc,SAAA1D,GACZ,EAAKiC,MAAMjC,EAAMuC,KAGNkB,EAASW,EAAQpD,W,8CCxL5B8D,EAAM,IAAIC,IAgLDC,E,WA7Kb,WAAY1C,GAAS,oBACnBD,KAAKC,OAASA,GAAU,G,qDAIjByB,GAAO,IAEJlD,EAMNkD,EANFnD,KAAQC,KACAS,EAKNyC,EALFnD,KAAQU,GACRS,EAIEgC,EAJFhC,MACAF,EAGEkC,EAHFlC,IACAF,EAEEoC,EAFFpC,SACAF,EACEsC,EADFtC,MAEEwD,EAAa,GAgIjB,OA9HAA,EAAWnC,KACT,IAAIoC,WAAS,CACXC,KAAM,MACNrB,MAAOsB,IAAKC,OAEd,IAAIH,WAAS,CACXC,KAAM,UACNrB,MAAOgB,EAAIQ,SACXC,WAAY,CAEVC,KAAM,mBAGV,IAAIN,WAAS,CACXC,KAAM,UACNrB,MAAO/B,GAAS,cAKhBlB,EAAKT,QACPS,EAAKT,MAAQS,EAAKT,MAAQ,GAIxBkB,EAAGlB,QACLkB,EAAGlB,MAAQkB,EAAGlB,MAAQ,GAGxBS,EAAO,CACLM,OAAQN,EAAKM,QAAU,EACvBD,KAAML,EAAKK,MAAQ,EACnBJ,IAAKD,EAAKC,KAAO,EACjBV,MAAOS,EAAKT,OAAS,EACrBC,KAAMQ,EAAKR,MAAQ,MAGrBiB,EAAK,CACHH,OAAQG,EAAGH,QAAUN,EAAKM,OAC1BD,KAAMI,EAAGJ,MAAQL,EAAKK,KACtBJ,IAAKQ,EAAGR,KAAOD,EAAKC,IACpBV,MAAOkB,EAAGlB,OAASS,EAAKT,MACxBC,KAAMiB,EAAGjB,MAAQQ,EAAKR,MAGxBQ,EAAO,IAAIkE,IAAOlE,GAClBS,EAAK,IAAIyD,IAAOzD,GAEM,IAAlBT,EAAK4E,KAAKnE,IAEZA,EAAGoE,IAAI,EAAG,KACVT,EAAWnC,KACT,IAAIoC,WAAS,CACXC,KAAM,UACNrB,MAAOjD,EAAKyE,SACZC,WAAY,CAEVI,MAAO,UAGX,IAAIT,WAAS,CACXC,KAAM,QACNrB,MAAOxC,EAAGgE,SACVC,WAAY,CAEVI,MAAO,YAMbV,EAAWnC,KACT,IAAIoC,WAAS,CACXC,KAAM,UACNrB,MAAOjD,EAAKyE,SACZC,WAAY,CAEVC,KAAM,mBAGV,IAAIN,WAAS,CACXC,KAAM,QACNrB,MAAOxC,EAAGgE,SACVC,WAAY,CAEVC,KAAM,oBAMV3D,GACFoD,EAAWnC,KACT,IAAIoC,WAAS,CACXC,KAAM,MACNrB,MAAOjC,EACP0D,WAAY,CACVI,MAAO,UAMXhE,GACFsD,EAAWnC,KACT,IAAIoC,WAAS,CACXC,KAAM,WACNrB,MAAOnC,KAKTF,GACFwD,EAAWnC,KACT,IAAIoC,WAAS,CACXC,KAAM,cACNrB,MAAOrC,KAKD,IAAImE,YAAU,CACxBT,KAAM,SACNF,iB,4BAOG,IAAD,OACA3C,EAAS,GAsBb,OApBAD,KAAKC,OAAO/B,SAAQ,SAAAuD,GAClBxB,EAAOQ,KAAK,EAAK+C,SAAS/B,OAGX,IAAI8B,YAAU,CAC7BT,KAAM,YACNW,WAAYxD,EACZ2C,WAAY,CACV,IAAIC,WAAS,CACXC,KAAM,UACNrB,MAAO,IAET,IAAIoB,WAAS,CACXC,KAAM,SACNrB,MAAO,4BAKMiC,e,aCvKjBC,G,MAAe,0HAOfC,GAAW,gNA6IFC,OAvIf,WAAgB,IAAD,EACiBC,mBAASF,IAD1B,mBACN7B,EADM,KACGgC,EADH,OAE+BD,oBAAS,GAFxC,mBAENE,EAFM,KAEUC,EAFV,OAGyBH,mBAASH,GAHlC,mBAGNO,EAHM,KAGOC,EAHP,KAITC,EAAS,IAAIrE,EAsBjB,OApBAqE,EAAOC,MACLL,EAAc,eAAWE,EAAX,kBAAgCnC,GAAYA,GAoB1D,yBAAKuC,UAAU,OACb,4BAAQA,UAAU,cAChB,uCAEF,yBAAKA,UAAU,eACZF,EAAOnE,QAAUmE,EAAOnE,OAAOgB,OAAS,GACvC,4BAAQqD,UAAU,WAAWC,QAjBrC,SAAqBvD,GACnBA,EAAEwD,iBAEF,IACInE,EADM,IAAIsC,EAAYyB,EAAOnE,QACnBwE,MAEVC,EAAO,IAAIC,KAAK,CAACtE,GAAM,CAAE/B,KAAM,gCACnCsG,iBAAOF,EAAM,gBAUP,kBAKF,yBAAKJ,UAAU,mBACb,wDAEE,2BACExB,KAAK,kBACLxE,KAAK,WACLuG,QAASb,EACTc,SAAU,SAAA9D,GAAC,OAAIiD,EAAkBjD,EAAE+D,OAAOF,aAG9C,6BACA,8BAGDb,GACC,yBAAKM,UAAU,mBACb,8BACEA,UAAU,mCACV7C,MAAOyC,EACPY,SAAU,SAAA9D,GAAC,OAAImD,EAAenD,EAAE+D,OAAOtD,WAI7C,8BACE6C,UAAU,YACV7C,MAAOM,EACP+C,SAAU,SAAA9D,GAAC,OAAI+C,EAAW/C,EAAE+D,OAAOtD,UAEpC2C,EAAOnE,QACNmE,EAAOnE,OAAOgB,OAAS,GACvBmD,EAAOnE,OAAOoB,KAAI,SAAA2D,GAChB,OACE,yBAAKV,UAAU,aACb,4BAAKU,EAAMtF,OACX,2BACG,gBACAsF,EAAMzG,KAAKC,KAAKC,IAChBuG,EAAMzG,KAAKC,KAAKT,MAChBiH,EAAMzG,KAAKC,KAAKR,KAChBgH,EAAMzG,KAAKC,KAAKK,MACf,8BACG,IACAmG,EAAMzG,KAAKC,KAAKK,KAChB,IACAmG,EAAMzG,KAAKC,KAAKM,OAASkG,EAAMzG,KAAKC,KAAKM,OAAS,MAGtD,qBACAkG,EAAMzG,KAAKU,GAAGR,IACduG,EAAMzG,KAAKU,GAAGlB,MACdiH,EAAMzG,KAAKU,GAAGjB,KACdgH,EAAMzG,KAAKU,GAAGJ,MACb,8BACG,IACAmG,EAAMzG,KAAKU,GAAGJ,KACd,IACAmG,EAAMzG,KAAKU,GAAGH,OAASkG,EAAMzG,KAAKU,GAAGH,OAAS,OAIpDkG,EAAM5F,OACL,2BACE,0BAAM6F,KAAK,MAAMC,aAAW,SAA5B,gBAEQ,IACPF,EAAM5F,OAGV4F,EAAM1F,UACL,2BACE,0BAAM2F,KAAK,MAAMC,aAAW,YAA5B,gBAEQ,IACPF,EAAM1F,UAGV0F,EAAMxF,KACL,2BACE,0BAAMyF,KAAK,MAAMC,aAAW,OAA5B,gBAEQ,IACPF,EAAMxF,KAIX,iCACE,gDACA,6BAAM2F,KAAKC,UAAUJ,EAAO,KAAM,YCtIhCK,QACW,cAA7BC,OAAOhG,SAASiG,UAEe,UAA7BD,OAAOhG,SAASiG,UAEhBD,OAAOhG,SAASiG,SAASC,MACvB,2DCZNC,IAASC,OAAO,kBAAC,GAAD,MAASC,SAASC,eAAe,SD2H3C,kBAAmBC,WACrBA,UAAUC,cAAcC,MAAMC,MAAK,SAAAC,GACjCA,EAAaC,kB","file":"static/js/main.77774640.chunk.js","sourcesContent":["import { ifElse, compose, test, prop } from \"ramda\";\n\n// 01.01.1900 and 31.12.2099\n// https://stackoverflow.com/questions/12472976/regex-validate-european-date-format-with-multiple-separators\nconst DayDef = \"(3[01][.]?|[12][0-9][.]?|0[1-9][.]?|[1-9][.]?)\";\nconst MonthNumberDef = \"1[012][.]?|0[1-9][.]?|[1-9][.]?\";\n\nconst MonthNameDE = [\n  \"Januar|Jan.?\",\n  \"Februar|Febr.?|Feb.?\",\n  \"März|Mär.?|Marz|Mrz.?\",\n  \"April|Apr.?\",\n  \"Mai.?\",\n  \"Juni|Jun.?\",\n  \"Juli|Jul.?\",\n  \"August|Aug.?\",\n  \"September|Sept.?|Sep.?\",\n  \"Oktober|Okt.?\",\n  \"November|Nov.?\",\n  \"Dezember|Dez.?\"\n];\n\nconst MonthNameDEDef = MonthNameDE.join(\"|\");\nconst MonthDef = \"(\" + MonthNumberDef + \"|\" + MonthNameDEDef + \")\";\nconst DateDef = DayDef + \"[. ]*\" + MonthDef + \"[. ]*(19\\\\d\\\\d|20\\\\d\\\\d|\\\\d\\\\d)\";\n\n// h\nconst hourDef = \"([ ]*(h|uhr))*\";\n\n// 00:01 - 23:59\nconst TimeDef = \"([01]\\\\d|2[0-3]):?([0-5]\\\\d)?\" + hourDef;\n\n// to\nconst toDef = \"[ ]*([-–]|to|bis)[ ]*\";\n\nconst testDate = RegExp(\"^\" + DateDef + \"$\", \"i\");\nconst testTime = RegExp(\"^\" + TimeDef + \"$\", \"i\");\nconst testTimeRange = RegExp(\"^\" + TimeDef + toDef + TimeDef + \"$\", \"i\");\n\n// notes\nconst testNotes = /^(✏️|notes|note|Notes|Note)[:]?[ ]?(.*)/;\nconst testLocation = /^(📍|place|location|ort)[:]?[ ]?(.*)/;\n\nconst testUrl = /^(http|www)(.*)/;\n\nconst parseDate = txt => {\n  let parsed = testDate.exec(txt);\n\n  let month = parsed[2];\n  let year = parseInt(parsed[3]);\n\n  // if the year is just in two digits assume we are speaking about 20??\n  if (year < 1900) {\n    year = year + 2000;\n  }\n\n  // parse names of month to month\n  MonthNameDE.forEach((def, index) => {\n    month = month.replace(RegExp(def, \"i\"), index + 1);\n  });\n\n  return {\n    type: \"date\",\n    date: {\n      from: {\n        day: parsed[1],\n        month: month,\n        year: year\n      }\n    }\n  };\n};\n\nconst parseNotes = txt => {\n  let parsed = testNotes.exec(txt);\n  return {\n    type: \"notes\",\n    notes: parsed[2]\n  };\n};\n\n\nconst parseLocation = txt => {\n  let parsed = testLocation.exec(txt);\n  return {\n    type: \"location\",\n    location: parsed[2]\n  };\n};\n\nconst parseUrl = txt => {\n  let parsed = testUrl.exec(txt);\n  return {\n    type: \"url\",\n    url: parsed[0]\n  };\n};\n\n\nconst parseTime = txt => {\n  let parsed = testTime.exec(txt);\n  return {\n    type: \"time\",\n    date: {\n      from: {\n        hour: parsed[1],\n        minute: parsed[2]\n      }\n    }\n  };\n};\n\nconst parseTimeRange = txt => {\n  let parsed = testTimeRange.exec(txt);\n  return {\n    type: \"time\",\n    date: {\n      from: {\n        hour: parsed[1],\n        minute: parsed[2]\n      },\n      to: {\n        hour: parsed[6],\n        minute: parsed[7]\n      }\n    }\n  };\n};\n\nexport const parseIfIsDate = ifElse(\n  compose(\n    test(testDate),\n    prop(\"body\")\n  ),\n  item => parseDate(item.body),\n  item => item\n);\n\nexport const parseIfIsTime = ifElse(\n  compose(\n    test(testTime),\n    prop(\"body\")\n  ),\n  item => parseTime(item.body),\n  item => item\n);\n\nexport const parseIfIsTimeRange = ifElse(\n  compose(\n    test(testTimeRange),\n    prop(\"body\")\n  ),\n  item => parseTimeRange(item.body),\n  item => item\n);\n\nexport const parseIfIsNotes = ifElse(\n  compose(\n    test(testNotes),\n    prop(\"body\")\n  ),\n  item => parseNotes(item.body),\n  item => item\n);\n\nexport const parseIfIsLocation = ifElse(\n  compose(\n    test(testLocation),\n    prop(\"body\")\n  ),\n  item => parseLocation(item.body),\n  item => item\n);\n\nexport const parseIfIsUrl = ifElse(\n  compose(\n    test(testUrl),\n    prop(\"body\")\n  ),\n  item => parseUrl(item.body),\n  item => item\n);\n\nexport const parseTitle = item => ({\n  type: \"title\",\n  title: { body: item.body },\n  body: item.body\n});\n","import fm from \"front-matter\";\nimport {\n  ifElse,\n  compose,\n  filter,\n  map,\n  trim,\n  isEmpty,\n  split,\n  equals,\n  prop,\n  propEq,\n  mergeDeepLeft,\n  find,\n  pick,\n  curry\n} from \"ramda\";\n\nimport {\n  parseIfIsDate,\n  parseIfIsTime,\n  parseIfIsTimeRange,\n  parseIfIsNotes,\n  parseIfIsUrl,\n  parseIfIsLocation,\n  parseTitle\n} from \"./fieldParsers\";\n\nconst typeUndefCb = (entry, cb) =>\n  ifElse(\n    compose(\n      equals(\"unknown\"),\n      prop(\"type\")\n    ),\n    item => cb(item),\n    item => item\n  )(entry);\n\nclass Parser {\n  constructor() {\n    this.events = [];\n  }\n\n  entry(entry, defaults) {\n    let parsedEntry = this.line(entry);\n    let out = mergeDeepLeft(parsedEntry, defaults);\n\n    out.date.to = mergeDeepLeft(out.date.to, out.date.from);\n\n    if (out.title.prefix && out.title.body) {\n      out.title = [out.title.prefix, out.title.body].join(\n        out.title.join || \" – \"\n      );\n    }\n\n    if (out.title.prefix && !out.title.body) {\n      out.title = out.title.prefix;\n    }\n\n    if (!out.title.prefix && (out.title.body || out.title.body === \"\")) {\n      out.title = out.title.body;\n    }\n\n    if (parsedEntry.notes && defaults.notes) {\n      out.notes = defaults.notes + \"\\n\" + parsedEntry.notes;\n    }\n\n    out = pick([\"date\", \"title\", \"notes\", \"location\", \"url\"], out);\n\n    this.events.push(out);\n    return out;\n  }\n\n  line(line) {\n    let out = line;\n\n    out = this.parseLine(out);\n    return out;\n  }\n\n  parseDateTime(item) {\n    // parse array\n    return compose(\n      curry(typeUndefCb(parseIfIsDate)),\n      curry(typeUndefCb(parseIfIsTime)),\n      curry(typeUndefCb(parseIfIsTimeRange)),\n      curry(typeUndefCb(parseIfIsNotes)),\n      curry(typeUndefCb(parseIfIsUrl)),\n      curry(typeUndefCb(parseIfIsLocation)),\n      curry(typeUndefCb(parseTitle))\n    )(item);\n  }\n\n  // see https://rosettacode.org/wiki/Tokenize_a_string_with_escaping#JavaScript\n  splitByComma(s) {\n    let esc = \"\\\\\";\n    let sep = \",\";\n    for (var a = [], t = \"\", i = 0, e = s.length; i < e; i += 1) {\n      var c = s.charAt(i);\n      if (c === esc) {\n        t += s.charAt(++i);\n      } else if (c !== sep) {\n        t += c;\n      } else {\n        a.push(t);\n        t = \"\";\n      }\n    }\n    a.push(t);\n    return a;\n  }\n\n  parseLine(line) {\n    // split up the line into components\n    // 30.4.2018, 18–20Uhr, Frühlingsferien => ['30.4.2018', '18–20Uhr', 'Frühlingsferien']\n    const splitter = compose(\n      map(trim),\n      this.splitByComma\n    );\n\n    // convert the string array to a object array\n    const addType = map(value => ({ type: \"unknown\", body: value }));\n\n    // build array\n    let data = compose(\n      addType,\n      splitter\n    )(line);\n\n    // parse array\n    data = map(this.parseDateTime, data);\n\n    let out = data;\n\n    out = mergeDeepLeft(\n      find(propEq(\"type\", \"time\"))(data) || {},\n      find(propEq(\"type\", \"date\"))(data) || {}\n    );\n\n    out = mergeDeepLeft(out, find(propEq(\"type\", \"notes\"))(data) || {});\n    out = mergeDeepLeft(out, find(propEq(\"type\", \"location\"))(data) || {});\n    out = mergeDeepLeft(out, find(propEq(\"type\", \"url\"))(data) || {});\n    out = mergeDeepLeft(out, find(propEq(\"type\", \"title\"))(data) || {});\n\n    return out;\n  }\n\n  parse(str) {\n    // parse frontmatter\n    var content = { body: str };\n\n    if (fm.test(str)) {\n      try {\n        // try to parse the frontmatter\n        content = fm(str);\n      } catch (err) {\n        // remove broken frontmatter\n        content.body = content.body.replace(/^---(.|[\\r\\n])*---/, \"\");\n        console.log(\"illegal frontmatter header\");\n      }\n    }\n\n    let _def = {\n      date: \"1.1.1970\",\n      title: \"event\",\n      url: \"\",\n      notes: \"\"\n    };\n\n    let defaults = mergeDeepLeft(content.attributes, _def);\n\n    if (defaults.date) {\n      defaults.date = this.parseDateTime({\n        type: \"unknown\",\n        body: defaults.date\n      }).date;\n    }\n\n    const splitter = compose(\n      filter(x => !isEmpty(x)),\n      map(trim),\n      split(/[\\r\\n]+/g /* here comes the line */)\n    );\n\n    let runLine = item => {\n      this.entry(item, defaults);\n    };\n\n    map(runLine, splitter(content.body));\n  }\n}\n\nexport default Parser;\n","import moment from \"moment\";\nimport { Property, Component } from \"immutable-ics\";\nimport uuid from \"uuid\";\n\nconst now = new moment();\n\nclass icsExporter {\n  constructor(events) {\n    this.events = events || [];\n  }\n\n  // generate the icsEvent\n  icsEvent(data) {\n    let {\n      date: { from },\n      date: { to },\n      title,\n      url,\n      location,\n      notes\n    } = data;\n    var properties = [];\n\n    properties.push(\n      new Property({\n        name: \"UID\",\n        value: uuid.v1()\n      }),\n      new Property({\n        name: \"DTSTAMP\",\n        value: now.toDate(),\n        parameters: {\n          // VALUE: 'DATE-TIME',\n          TZID: \"Europe/Zurich\"\n        }\n      }),\n      new Property({\n        name: \"SUMMARY\",\n        value: title || \"no Title\"\n      })\n    );\n\n    // zero based month in js\n    if (from.month) {\n      from.month = from.month - 1;\n    }\n\n    // zero based month in js\n    if (to.month) {\n      to.month = to.month - 1;\n    }\n\n    from = {\n      minute: from.minute || 0,\n      hour: from.hour || 0,\n      day: from.day || 1,\n      month: from.month || 0,\n      year: from.year || 1900\n    };\n\n    to = {\n      minute: to.minute || from.minute,\n      hour: to.hour || from.hour,\n      day: to.day || from.day,\n      month: to.month || from.month,\n      year: to.year || from.year\n    };\n\n    from = new moment(from);\n    to = new moment(to);\n\n    if (from.diff(to) === 0) {\n      // whole day handling\n      to.add(1, \"d\");\n      properties.push(\n        new Property({\n          name: \"DTSTART\",\n          value: from.toDate(),\n          parameters: {\n            // VALUE: 'DATE-TIME',\n            VALUE: \"DATE\"\n          }\n        }),\n        new Property({\n          name: \"DTEND\",\n          value: to.toDate(),\n          parameters: {\n            // VALUE: 'DATE-TIME',\n            VALUE: \"DATE\"\n          }\n        })\n      );\n    } else {\n      // handling with time\n      properties.push(\n        new Property({\n          name: \"DTSTART\",\n          value: from.toDate(),\n          parameters: {\n            // VALUE: 'DATE-TIME',\n            TZID: \"Europe/Zurich\"\n          }\n        }),\n        new Property({\n          name: \"DTEND\",\n          value: to.toDate(),\n          parameters: {\n            // VALUE: 'DATE-TIME',\n            TZID: \"Europe/Zurich\"\n          }\n        })\n      );\n    }\n\n    if (url) {\n      properties.push(\n        new Property({\n          name: \"URL\",\n          value: url,\n          parameters: {\n            VALUE: \"URI\"\n          }\n        })\n      );\n    }\n\n    if (location) {\n      properties.push(\n        new Property({\n          name: \"LOCATION\",\n          value: location,\n        })\n      );\n    }\n\n    if (notes) {\n      properties.push(\n        new Property({\n          name: \"DESCRIPTION\",\n          value: notes\n        })\n      );\n    }\n\n    var event = new Component({\n      name: \"VEVENT\",\n      properties\n    });\n\n    return event;\n  }\n\n  // generate the ics\n  ics() {\n    var events = [];\n\n    this.events.forEach(value => {\n      events.push(this.icsEvent(value));\n    });\n\n    const calendar = new Component({\n      name: \"VCALENDAR\",\n      components: events,\n      properties: [\n        new Property({\n          name: \"VERSION\",\n          value: 2\n        }),\n        new Property({\n          name: \"PRODID\",\n          value: \"signalwerk-generator\"\n        })\n      ]\n    });\n\n    let out = calendar.toString();\n    return out;\n  }\n}\n\nexport default icsExporter;\n","import React, { useState } from \"react\";\n\nimport Parser from \"./lib/Parser\";\nimport icsExporter from \"./lib/icsExporter\";\nimport { saveAs } from \"file-saver\";\n\nimport \"./App.css\";\n\nconst demoFrontmatter = `title:\n  prefix: \"Meetup\"\ndate: 18:00–22:00\nurl: https://test.com\nlocation: Switzerland\nnotes: bring beer.\n`;\nconst demoContent = `22.2.2026, Simple Event\n23.2.2026, 16:00–17:00, Time Event\n24.2.2026, Event with notes, notes: it's nice\n25.2.2026, Event with location, location: Zurich\n26.2.2026, Event with link, http://test.ch`;\n\nfunction App() {\n  const [content, setContent] = useState(demoContent);\n  const [useFrontmatter, setUseFrontmatter] = useState(false);\n  const [frontmatter, setFrontmatter] = useState(demoFrontmatter);\n  let parser = new Parser();\n\n  parser.parse(\n    useFrontmatter ? `---\\n${frontmatter}\\n---\\n${content}` : content\n  );\n\n  // // Similar to componentDidMount and componentDidUpdate:\n  //  useEffect(() => {\n  //    // Update the document title using the browser API\n  //    document.title = `You clicked ${count} times`;\n  //  });\n  //\n  function handleClick(e) {\n    e.preventDefault();\n\n    let ics = new icsExporter(parser.events);\n    let out = ics.ics();\n\n    var blob = new Blob([out], { type: \"text/calendar;charset=utf-8\" });\n    saveAs(blob, \"events.ics\");\n  }\n\n  return (\n    <div className=\"App\">\n      <header className=\"App-header\">\n        <h1>Events</h1>\n      </header>\n      <div className=\"App-content\">\n        {parser.events && parser.events.length > 0 && (\n          <button className=\"App-save\" onClick={handleClick}>\n            save .ics-file\n          </button>\n        )}\n\n        <div className=\"App-frontmatter\">\n          <label>\n            Use Global attributes:\n            <input\n              name=\"use frontmatter\"\n              type=\"checkbox\"\n              checked={useFrontmatter}\n              onChange={e => setUseFrontmatter(e.target.checked)}\n            />\n          </label>\n          <br />\n          <br />\n        </div>\n\n        {useFrontmatter && (\n          <div className=\"App-frontmatter\">\n            <textarea\n              className=\"App-input App-input--frontmatter\"\n              value={frontmatter}\n              onChange={e => setFrontmatter(e.target.value)}\n            />\n          </div>\n        )}\n        <textarea\n          className=\"App-input\"\n          value={content}\n          onChange={e => setContent(e.target.value)}\n        />\n        {parser.events &&\n          parser.events.length > 0 &&\n          parser.events.map(event => {\n            return (\n              <div className=\"App-event\">\n                <h3>{event.title}</h3>\n                <p>\n                  {\"📅 \"}\n                  {event.date.from.day}\n                  {event.date.from.month}\n                  {event.date.from.year}\n                  {event.date.from.hour && (\n                    <span>\n                      {\" \"}\n                      {event.date.from.hour}\n                      {\":\"}\n                      {event.date.from.minute ? event.date.from.minute : \"00\"}\n                    </span>\n                  )}\n                  {\" – \"}\n                  {event.date.to.day}\n                  {event.date.to.month}\n                  {event.date.to.year}\n                  {event.date.to.hour && (\n                    <span>\n                      {\" \"}\n                      {event.date.to.hour}\n                      {\":\"}\n                      {event.date.to.minute ? event.date.to.minute : \"00\"}\n                    </span>\n                  )}\n                </p>\n                {event.notes && (\n                  <p>\n                    <span role=\"img\" aria-label=\"notes\">\n                      ✏️\n                    </span>{\" \"}\n                    {event.notes}\n                  </p>\n                )}\n                {event.location && (\n                  <p>\n                    <span role=\"img\" aria-label=\"location\">\n                      📍\n                    </span>{\" \"}\n                    {event.location}\n                  </p>\n                )}\n                {event.url && (\n                  <p>\n                    <span role=\"img\" aria-label=\"url\">\n                      🔗\n                    </span>{\" \"}\n                    {event.url}\n                  </p>\n                )}\n\n                <details>\n                  <summary>Debug-Infos</summary>\n                  <pre>{JSON.stringify(event, null, 2)}</pre>\n                </details>\n              </div>\n            );\n          })}\n      </div>\n    </div>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}